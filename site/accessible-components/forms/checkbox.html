<!DOCTYPE html>
<html lang="en">
 
<head>
	
	<meta charset="utf-8">
	
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	
	<link rel="stylesheet" href="/css/style.css" media="screen">

</head>

<body>

    <div class="o-container">

        <a href="/index.html">Back to main page</a>

        <h1>Checkboxes</h1>
        
        <fieldset class="e-fieldset">

            <legend class="e-legend">Who is your favorite 19th century scientist</legend>

            <div class="c-form__input-group">

                <input class="e-input e-input--checkbox" id="bell" type="checkbox" name="scientist" value="bell">
                <label class="e-label" for="bell">Alexander Graham Bell</label>

            </div>

            <div class="c-form__input-group">

                <input class="e-input e-input--checkbox" id="curry" type="checkbox" name="scientist" value="curry">
                <label class="e-label" for="curry">Marie Curie</label>

            </div>

            <div class="c-form__input-group">

                <input class="e-input e-input--checkbox" id="lovelace" type="checkbox" name="scientist" value="lovelace">
                <label class="e-label" for="lovelace">Ada Lovelace</label>

            </div>

        </fieldset>

        <h2>Styled Checkboxes</h2>

        <fieldset class="e-fieldset styled-checkbox">

            <legend class="e-legend">Pick one</legend>

            <div class="c-form__input-group">

                <input class="e-input e-input--checkbox" id="a" type="checkbox" name="a1" value="a">
                <label class="e-label" for="a">An option</label>

            </div>

            <div class="c-form__input-group">

                <input class="e-input e-input--checkbox" id="b" type="checkbox" name="a1" value="b">
                <label class="e-label" for="b">Be another option</label>

            </div>

            <div class="c-form__input-group">

                <input class="e-input e-input--checkbox" id="c" type="checkbox" name="a1" value="c">
                <label class="e-label" for="c">Choose me</label>

            </div>

        </fieldset>

        <h2>Pick at least 1</h2>

        <form class="js-form">

            <fieldset class="e-fieldset js-form-check js-form-check-minpick" data-minpick="2" data-error="Pick at least 1">

                <legend class="e-legend">Who is your favorite 19th century scientist</legend>

                <div class="c-form__input-group">

                    <input class="e-input e-input--checkbox" id="a1" type="checkbox" name="a" value="bell">
                    <label class="e-label" for="a1">Alexander Graham Bell</label>

                </div>

                <div class="c-form__input-group">

                    <input class="e-input e-input--checkbox" id="a2" type="checkbox" name="a" value="curry">
                    <label class="e-label" for="a2">Marie Curie</label>

                </div>

                <div class="c-form__input-group">

                    <input class="e-input e-input--checkbox" id="a3" type="checkbox" name="a" value="lovelace">
                    <label class="e-label" for="a3">Ada Lovelace</label>

                </div>

                <span class="c-form__error" id="min-pick" role="alert">You must select at least 2</span>

            </fieldset>

            <button type="submit">Test submission</button>

        </form>

    </div>

    <script>

        var checkForms = Array.from(document.querySelectorAll('.js-form'));

        checkForms.forEach(form => form.addEventListener('submit', (e) => {

            checkForm(form, e);

        }));

        var checkForm = function(form, e) {

            let formSubmit = true;

            const formEls = Array.from(form.querySelectorAll('.js-form-check'));

            resetFormErrors();

            formEls.forEach((el) => {

                if(el.classList.contains('js-form-check-minpick')) {

                    checkMinPick(el);

                }

            });

            function resetFormErrors() {

                const formErrors = Array.from(form.querySelectorAll('.c-form__error'));

                formErrors.forEach((el) => {

                    el.classList.remove('c-form__error--active');

                });

            }

            function checkMinPick(el) {

                const minAmountRequired = el.getAttribute('data-minpick');

                const checkboxes = Array.from(el.querySelectorAll('.e-input--checkbox:checked'));

                if(checkboxes.length < minAmountRequired) {

                    formSubmit = false;

                    el.querySelectorAll('.c-form__error')[0].classList.add('c-form__error--active');

                }

            }

            if(!formSubmit) e.preventDefault();

        }
    
    </script>

</body>
</html>

